const APP={init:()=>{APP.handleDeadLinks(),APP.scrollToAnchor(),APP.initCountDown(document.querySelector(".site-alert .counter"),(new Date).setHours((new Date).getHours()+4)),APP.handleContactModal(document.getElementById("contactSpecialistModal")),APP.handleContactModal(document.getElementById("joinCommunityModal")),APP.initSlider(".specialists-slider"),APP.initSlider(".posts-slider")},handleDeadLinks:()=>{document.querySelectorAll('a[href="#"]').forEach(e=>{e.addEventListener("click",e=>e.preventDefault())})},scrollToTop:()=>{window.scrollTo({top:0,behavior:"smooth"})},scrollToAnchor:(e=document)=>{e.querySelectorAll(".smoothScroll").forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var e=this.getAttribute("href"),t=document.querySelector(e);e&&t&&t.scrollIntoView({block:"start",behavior:"smooth"})})})},initSlider:e=>{var t=document.querySelector(e);t&&new Swiper(t,APP.createSliderOptions(e))},createSliderOptions:e=>({slidesPerView:1,spaceBetween:24,loop:!0,autoHeight:!0,navigation:{nextEl:e+" .swiper-button-next",prevEl:e+" .swiper-button-prev"},pagination:{el:e+" .swiper-pagination",type:"bullets"},autoplay:{delay:5e3},breakpoints:{768:{slidesPerView:2},992:{slidesPerView:3},1400:{slidesPerView:4}}}),handleContactModal:t=>{if(t){const o=t.querySelector(".contact-form"),e=o.querySelectorAll(".form-control"),n=o.querySelector(".form-main"),r=o.querySelector(".form-result"),l=o.querySelector('[type="submit"]'),i=l.textContent;t.addEventListener("show.bs.modal",e=>{e=e.relatedTarget.getAttribute("data-specialist");e&&(t.querySelector("#specialistName").textContent=e)}),o.addEventListener("submit",e=>{e.preventDefault();new FormData(o);return l.setAttribute("disabled",!0),l.textContent="Отправка...",new Promise((e,t)=>{setTimeout(()=>{e()},3e3)}).then(e=>{n.classList.add("d-none"),r.classList.remove("d-none")}).catch(e=>console.error(e)).finally(()=>{l.removeAttribute("disabled"),l.textContent=i})}),t.addEventListener("hidden.bs.modal",()=>{n.classList.remove("d-none"),r.classList.add("d-none"),e.forEach(e=>e.value="")})}},initCountDown:(l,e)=>{if(l||e){const i=new Date(e).getTime(),a=setInterval(function(){var e=(new Date).getTime(),e=i-e,t=Math.floor(e/864e5),o=Math.floor(e%864e5/36e5),n=Math.floor(e%36e5/6e4),r=Math.floor(e%6e4/1e3);l.textContent=(t?t+":":"")+(o?o+":":"")+(n?n+":":"")+(r||""),e<0&&(clearInterval(a),l.textContent="0:00:00")},1e3)}}};APP.init();